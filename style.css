:root {
    --primary-color: #4a90e2;
    --primary-dark: #357abd;
    --secondary-color: #6c757d;
    --success-color: #2ecc71;
    --danger-color: #e74c3c;
    --bg-color: #f4f6f9;
    --panel-bg: #ffffff;
    --text-color: #2c3e50;
    --border-radius: 8px;
    --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    --transition: all 0.3s ease;
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    font-family: 'Noto Sans TC', sans-serif;
}

body {
    background-color: var(--bg-color);
    color: var(--text-color);
    height: 100vh;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

/* 按鈕樣式 */
.btn {
    padding: 8px 16px;
    border: none;
    border-radius: var(--border-radius);
    cursor: pointer;
    font-weight: 500;
    transition: var(--transition);
    color: white;
}

.btn-primary {
    background-color: var(--primary-color);
}

.btn-primary:hover {
    background-color: var(--primary-dark);
}

.btn-secondary {
    background-color: var(--secondary-color);
    font-size: 0.9em;
}

.btn-secondary:hover {
    background-color: #5a6268;
}

.btn-success {
    background-color: var(--success-color);
}

.btn-success:hover {
    background-color: #27ae60;
}

.btn-danger {
    background-color: var(--danger-color);
}

.btn-danger:hover {
    background-color: #c0392b;
}

.btn-lg {
    padding: 12px 24px;
    font-size: 1.1em;
}

/* 佈局容器 */
.app-container {
    display: flex;
    flex-direction: column;
    display: flex;
    gap: 5px;
    border-bottom: 1px solid #ddd;
}

.nav-tab {
    padding: 12px 24px;
    background: none;
    border: none;
    cursor: pointer;
    font-size: 1rem;
    color: #495057;
    position: relative;
    border-top-left-radius: 6px;
    border-top-right-radius: 6px;
    transition: background-color 0.2s, color 0.2s;
}

.nav-tab:hover {
    background-color: #dfe6ed;
    color: var(--primary-color);
}

.nav-tab.active {
    background-color: var(--bg-color);
    /* Match body bg or generic bg */
    color: var(--primary-dark);
    font-weight: bold;
    border-bottom: 3px solid var(--primary-color);
}

/* Tab Content */
.main-content-wrapper {
    flex: 1;
    overflow: hidden;
    position: relative;
    background-color: var(--bg-color);
    padding: 20px;
}

.tab-content {
    display: none;
    height: 100%;
    flex-direction: column;
    animation: fadeIn 0.3s ease;
}

.tab-content.active {
    display: flex !important;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(5px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Stacked Input Form */
.input-stack {
    display: flex;
    flex-direction: column;
    gap: 10px;
    max-width: 100%;
}

.input-stack label {
    font-weight: bold;
    color: var(--secondary-color);
    margin-bottom: -5px;
}

.input-stack input {
    padding: 12px;
    font-size: 1rem;
}

.input-stack button {
    padding: 12px;
    font-size: 1.1rem;
    width: 100%;
}

/* Roll Call View (Reuse main-content styles) */
.main-content {
    display: flex;
    flex: 1;
    overflow: hidden;
    gap: 20px;
    height: 100%;
}

.panel {
    background-color: var(--panel-bg);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow);
    display: flex;
    flex-direction: column;
    padding: 20px;
}

.panel-header {
    margin-bottom: 15px;
    border-bottom: 2px solid #f0f0f0;
    padding-bottom: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.panel-header h2 {
    color: var(--primary-dark);
}

/* Settings View */
.settings-container {
    overflow-y: auto;
    max-width: 800px;
    margin: 0 auto;
    width: 100%;
    height: 100%;
}

.settings-section {
    margin-bottom: 30px;
}

.settings-section h3 {
    margin-bottom: 15px;
    color: var(--secondary-color);
    border-left: 4px solid var(--primary-color);
    padding-left: 10px;
}

.input-group,
.import-group {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
}

.import-group {
    align-items: flex-start;
}

input[type="text"],
textarea {
    flex: 1;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: var(--border-radius);
    font-size: 1em;
}

.settings-list-header {
    display: grid;
    grid-template-columns: 2fr 2fr 1fr;
    font-weight: bold;
    padding: 10px;
    background-color: #f8f9fa;
    border-radius: 4px;
    margin-bottom: 5px;
}

.settings-list {
    border: 1px solid #eee;
    border-radius: 4px;
    max-height: 300px;
    overflow-y: auto;
}

.settings-item {
    display: grid;
    grid-template-columns: 2fr 2fr 1fr;
    padding: 10px;
    border-bottom: 1px solid #eee;
    align-items: center;
}

.settings-item:last-child {
    border-bottom: none;
}

.settings-item button {
    padding: 4px 8px;
    font-size: 0.9em;
}

/* Report View */
.report-container {
    height: 100%;
    overflow: hidden;
}

.report-grid {
    flex: 1;
    overflow-y: auto;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
    padding: 10px;
}

/* Report Summary Stats */
.report-summary {
    display: flex;
    gap: 15px;
    margin-bottom: 20px;
    padding: 5px 10px;
}

/* Mobile: Wrap stats to fit screen */
@media (max-width: 600px) {
    .report-summary {
        flex-wrap: wrap;
        justify-content: center;
    }

    .summary-card {
        flex: 1 1 40%;
        /* 2 cards per row approx */
        min-width: 120px;
    }
}

.summary-card {
    flex: 1;
    min-width: 140px;
    /* Ensure minimum width */
    flex-shrink: 0;
    /* Prevent shrinking */
    background: #fff;
    padding: 15px;
    border-radius: var(--border-radius);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    text-align: center;
    border: 1px solid #eee;
}

/* Mobile Responsiveness */
@media (max-width: 600px) {
    .panel-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
    }

    .panel-header h2 {
        font-size: 1.25rem;
    }

    .panel-header button {
        width: 100%;
    }
}

background: white;
border: 1px solid #e0e0e0;
border-radius: 8px;
padding: 15px 25px;
display: flex;
align-items: center;
gap: 15px;
box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.summary-card h3 {
    margin: 0;
    font-size: 1rem;
    color: #666;
}

.summary-card span {
    font-size: 1.5rem;
    font-weight: bold;
    color: var(--primary-dark);
}

.summary-card.total span {
    color: var(--primary-color);
}

.summary-card.duty span {
    color: var(--danger-color);
}

.unit-card {
    background-color: white;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    padding: 15px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.unit-header {
    font-weight: bold;
    font-size: 1.2em;
    margin-bottom: 10px;
    color: var(--primary-dark);
    padding-bottom: 5px;
    border-bottom: 2px solid #eee;
    display: flex;
    justify-content: space-between;
}

.unit-stats {
    font-size: 0.9em;
    color: #666;
    margin-bottom: 10px;
}

.unit-person-row {
    display: flex;
    justify-content: space-between;
    padding: 5px 0;
    border-bottom: 1px dashed #eee;
}

.unit-person-row:last-child {
    border-bottom: none;
}

.status-tag {
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 0.85em;
    background-color: #e9ecef;
    color: #555;
}

.status-tag.active-duty {
    background-color: #d1e7dd;
    color: #0f5132;
}

.status-tag.unassigned {
    background-color: #f8d7da;
    color: #842029;
}

/* Existing People/Duty Panel Styles (Adapted) */
.people-list-container {
    flex: 1;
    overflow-y: auto;
    background-color: #f8f9fa;
    padding: 10px;
    /* Add padding for aesthetics */
}

.person-card {
    background-color: white;
    padding: 12px;
    margin-bottom: 8px;
    border-radius: var(--border-radius);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    transition: var(--transition);
    border: 1px solid #e0e0e0;
    display: flex;
    flex-direction: column;
    /* Stack name and select */
    gap: 8px;
}

.person-card:hover {
    box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
}

.person-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
}

.person-card .person-name {
    font-weight: bold;
    font-size: 1rem;
    color: var(--text-color);
}

.person-card .person-unit {
    font-size: 0.8em;
    color: #888;
    background-color: #f1f3f5;
    padding: 2px 6px;
    border-radius: 4px;
}

.person-duty-select {
    width: 100%;
    padding: 6px;
    border: 1px solid #ced4da;
    border-radius: 4px;
    font-size: 0.95em;
    background-color: #fff;
    cursor: pointer;
}

.person-duty-select:focus {
    border-color: var(--primary-color);
    outline: none;
}

.person-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
}

.person-card.hidden {
    display: none !important;
}

.duties-container {
    flex: 1;
    overflow-y: auto;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 15px;
    padding: 5px;
}

.duty-column {
    background-color: #f8f9fa;
    border-radius: var(--border-radius);
    border: 1px solid #e0e0e0;
    display: flex;
    flex-direction: column;
    height: 100%;
    /* Fill container */
    max-height: 400px;
}

.duty-header {
    background-color: #e9ecef;
    padding: 10px;
    border-top-left-radius: var(--border-radius);
    border-top-right-radius: var(--border-radius);
    font-weight: bold;
    text-align: center;
}

.duty-content {
    padding: 8px 12px;
    border: 1px solid #ddd;
    border-radius: 20px;
    width: 250px;
    transition: var(--transition);
}

.search-container input:focus {
    width: 300px;
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 5px rgba(74, 144, 226, 0.3);
}

.empty-state {
    text-align: center;
    color: #adb5bd;
    margin-top: 20px;
    font-style: italic;
}

/* Mobile Responsive */
@media (max-width: 768px) {
    .main-header {
        flex-direction: column;
        gap: 10px;
        align-items: stretch;
    }

    .header-controls {
        flex-direction: column;
        gap: 10px;
    }

    .search-container input {
        width: 100%;
    }

    .search-container input:focus {
        width: 100%;
    }

    .main-content {
        flex-direction: column;
        overflow-y: auto;
        /* Allow full page scroll on mobile */
    }

    .panel {
        height: auto;
        /* max-height: 50vh;  <-- Removed global restriction */
        overflow: visible;
        /* Let it flow */
    }

    /* Only restrict Roll Call panels to allow split view scrolling if needed, 
       or let them flow too? 
       If we let them flow, the user scrolls DOWN to see duties. This is usually better on mobile.
       Previous issue: "slide" (scroll). 
       Let's allow FULL PAGE scrolling for everything on mobile.
    */

    .people-list-container,
    .duties-container {
        max-height: none;
        /* Let lists expand fully so user scrolls the PAGE, not the container */
        overflow: visible;
    }

    .duties-container {
        grid-template-columns: 1fr;
    }

    .duty-column {
        max-height: none;
        margin-bottom: 15px;
        /* Add spacer between duty blocks */
    }

    /* Tabs scrollable on mobile */
    .main-nav {
        overflow-x: auto;
        white-space: nowrap;
        padding-bottom: 5px;
        /* Scrollbar space */
    }

    .person-card {
        padding: 12px 15px;
        /* Larger touch target */
    }

    /* Make buttons full width */
    .settings-item button,
    .btn {
        padding: 10px;
        width: 100%;
    }

    /* Stack inputs vertically */
    .input-group,
    .import-group {
        flex-direction: column;
        gap: 10px;
    }

    .input-group input,
    .input-group button,
    .import-group textarea,
    .import-group button {
        width: 100%;
        margin: 0;
    }

    /* Adjust list header to disappear or adjust */
    .settings-list-header {
        display: none;
        /* Hide header on mobile, standard pattern */
    }

    .settings-item {
        grid-template-columns: 1fr 1fr auto;
        gap: 5px;
        font-size: 0.9em;
    }

    /* Flatten Settings Panel for Mobile */
    .settings-container.panel {
        box-shadow: none !important;
        border-radius: 0;
        background-color: transparent;
        padding: 0;
        margin: 0;
    }

    .settings-container h2 {
        padding: 10px 5px;
        font-size: 1.2rem;
    }

    .settings-section {
        background-color: #fff;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        /* Subtle shadow for sections instead of main card */
    }
}

/* Selection State (Mobile Alternative) */
.person-card.selected {
    background-color: #dbeafe;
    border: 2px solid var(--primary-color);
    transform: scale(1.02);
}

.duty-content.selectable-target {
    background-color: #e8f5e9;
    border: 2px dashed #2ecc71;
    cursor: pointer;
}

/* Report Summary Styles */
.unit-card {
    margin-bottom: 20px;
    background-color: white;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    border-radius: var(--border-radius);
    overflow: hidden;
}

.unit-card summary {
    list-style: none;
    cursor: pointer;
}

.unit-card summary::-webkit-details-marker {
    display: none;
}

.unit-header {
    background-color: var(--primary-color);
    color: white;
    padding: 10px;
    display: flex;
    justify-content: space-between;
}


/* Force Mobile Scroll Fix */
@media (max-width: 768px) {
    .main-content-wrapper {
        overflow-y: auto !important;
        -webkit-overflow-scrolling: touch;
    }

    .main-content {
        overflow: visible !important;
        height: auto !important;
    }

    .tab-content {
        overflow: visible !important;
        height: auto !important;
        display: block;
    }
}

/* App Header */
.app-header {
    background-color: #fff;
    padding: 15px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid #e0e0e0;
    flex-wrap: wrap;
    gap: 10px;
}

.app-header h1 {
    font-size: 1.5rem;
    color: var(--primary-dark);
    margin: 0;
}

.session-selector {
    display: flex;
    align-items: center;
    gap: 10px;
}

.session-selector select {
    padding: 8px 12px;
    border-radius: var(--border-radius);
    border: 1px solid #ced4da;
    font-size: 1rem;
    color: #495057;
    background-color: #fff;
    cursor: pointer;
}

.session-selector select:focus {
    border-color: var(--primary-color);
    outline: none;
    box-shadow: 0 0 0 0.2rem rgba(74, 144, 226, 0.25);
}

/* Responsive Header */
@media (max-width: 600px) {
    .app-header {
        flex-direction: column;
        align-items: flex-start;
    }

    .session-selector {
        width: 100%;
        justify-content: space-between;
    }

    .session-selector select {
        flex: 1;
    }
}

/* Report Table Styles */
.report-table-container {
    overflow-x: auto;
    margin-bottom: 20px;
    background: white;
    padding: 15px;
    border-radius: var(--border-radius);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.report-table {
    width: 100%;
    border-collapse: collapse;
    min-width: 600px;
}

.report-table th,
.report-table td {
    padding: 12px 15px;
    text-align: center;
    border-bottom: 1px solid #eee;
}

.report-table th {
    background-color: #f8f9fa;
    color: var(--primary-dark);
    font-weight: bold;
    white-space: nowrap;
}

.report-table tr:last-child td {
    border-bottom: none;
}

.report-table tr:hover {
    background-color: #f1f3f5;
}

.report-table .group-name {
    text-align: left;
    font-weight: bold;
    color: var(--text-color);
}

.report-table .zero-count {
    color: #ccc;
    font-size: 0.9em;
}

.report-table .has-count {
    font-weight: bold;
    color: var(--primary-color);
}